<div class="room-wrapper">
  <div *ngIf="loading">
    <p>Loading... please wait</p>
  </div>
  <div class="conversation-wrapper" *ngIf="!loading">
    <app-navbar>
      <div class="navbar-content-wrapper">
        <div class="room-info">
          <button tuiIconButton type="button" size="s" appearance="icon" icon="tuiIconArrowLeftLarge" tuiHint="Go back"
            (click)="goBack()"></button>
          <span class="room-name">{{conversation?.uniqueName}}</span>
        </div>
        <div class="room-options">
          <button tuiIconButton type="button" size="s" appearance="icon" icon="tuiIconLogoutLarge" tuiHint="Leave room"
            (click)="showDialog(confirmationDialog)"></button>
          <button tuiIconButton type="button" size="s" appearance="icon" icon="tuiIconUsers" tuiHint="Participants" (click)="showParticipants()"></button>
        </div>
      </div>
    </app-navbar>
    <app-chat [messages]="messages" [username]="user ? user.user_name : ''" (onSend)="sendMessage($event)"></app-chat>
  </div>
</div>

<ng-template #confirmationDialog let-observer let-data="data">
  <p>{{data.message}}</p>
  <button tuiButton
          type="button"
          size="m"
          (click)="observer.complete()">
    {{data.confirmText || 'Confirm'}}
  </button>
  <button tuiButton
          type="button"
          size="m"
          (click)="observer.complete()">
    {{data.cancelText || 'Cancel' }}
  </button>
</ng-template>